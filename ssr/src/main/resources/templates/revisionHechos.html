<html th:replace="~{layout/baseTemplate :: html( ~{} )}" xmlns:th="http://www.thymeleaf.org">
<div th:fragment="contenido">

    <div class="container py-5">

        <div class="d-flex justify-content-between align-items-center mb-5">
            <div>
                <h2 class="fw-bold mb-1">Revisión de Hechos</h2>
                <p class="text-muted mb-0">Modera las contribuciones subidas manualmente por usuarios.</p>
            </div>
            <a href="/panel-control" class="btn btn-outline-secondary btn-sm">
                <i class="uil uil-arrow-left"></i> Volver al Panel
            </a>
        </div>

        <div th:if="${solicitudesHechos.empty}" class="text-center py-5 bg-white rounded-3 shadow-sm border border-dashed">
            <div class="mb-3 text-muted opacity-25">
                <i class="uil uil-check-circle display-4"></i>
            </div>
            <h5 class="text-muted">Bandeja de entrada vacía</h5>
            <p class="text-muted small mb-0">No hay hechos pendientes de revisión en este momento.</p>
        </div>

        <div th:unless="${solicitudesHechos.empty}" class="row row-cols-1 row-cols-md-2 row-cols-xl-3 g-4">

            <div th:each="s : ${solicitudesHechos}" class="col">
                <div class="card border-0 shadow-sm h-100 hover-shadow transition-all">

                    <div class="card-header bg-white border-bottom-0 pt-3 pb-0 d-flex justify-content-between align-items-start">
                        <span class="badge bg-primary bg-opacity-10 text-primary border border-primary border-opacity-10 rounded-pill">
                            <i class="uil uil-tag-alt me-1"></i> <span th:text="${s.categoria}">Categoría</span>
                        </span>
                        <small class="text-muted font-monospace" style="font-size: 0.75rem;">ID: <span th:text="${s.id}">#</span></small>
                    </div>

                    <div class="card-body">

                        <h5 class="card-title fw-bold text-dark mt-2 mb-3 text-truncate" th:text="${s.titulo}" th:title="${s.titulo}">Título del Hecho</h5>

                        <div class="bg-light rounded-3 p-2 border border-light">
                            <div class="d-flex justify-content-between align-items-center mb-1">
                                <small class="text-muted text-uppercase fw-bold" style="font-size: 0.6rem;">Ocurrido</small>
                                <small class="text-dark fw-bold">
                                    <i class="uil uil-calendar-alt text-secondary"></i> <span th:text="${#temporals.format(s.fecha_acontecimiento, 'dd/MM/yyyy')}">Fecha</span>
                                </small>
                            </div>
                            <div class="d-flex justify-content-between align-items-center">
                                <small class="text-muted text-uppercase fw-bold" style="font-size: 0.6rem;">Subido</small>
                                <small class="text-dark">
                                    <i class="uil uil-upload text-secondary"></i> <span th:text="${#temporals.format(s.fecha_carga, 'dd/MM/yyyy')}">Fecha</span>
                                </small>
                            </div>
                        </div>

                        <div class="d-grid mt-3">
                            <a th:href="@{/panel-control/revisionHechos/{idHecho} (idHecho=${s.id})}" 
                               class="btn btn-outline-primary btn-sm fw-medium shadow-sm">
                                <i class="uil uil-eye"></i> Revisar Detalles Completos
                            </a>
                        </div>
                    </div>

                    <div class="card-footer bg-white border-top py-3">
                        <div class="row g-2">
                            <div class="col-4">
                                <a th:href="@{/panel-control/revisionHechos/{idHecho}/aceptar (idHecho=${s.id})}" 
                                   class="btn btn-success btn-sm w-100 h-100 d-flex flex-column align-items-center justify-content-center py-2"
                                   title="Aceptar Hecho"
                                   onclick="return confirm('¿Publicar este hecho inmediatamente?');">
                                    <i class="uil uil-check fs-5"></i>
                                    <span style="font-size: 0.65rem;">Aceptar</span>
                                </a>
                            </div>
                            
                            <div class="col-4">
                                <a th:href="@{/panel-control/revisionHechos/{idHecho}/aceptarConSugerencias (idHecho=${s.id})}" 
                                   class="btn btn-warning btn-sm w-100 h-100 d-flex flex-column align-items-center justify-content-center py-2 text-white"
                                   title="Pedir Cambios">
                                    <i class="uil uil-comment-alt-edit fs-5"></i>
                                    <span style="font-size: 0.65rem;">Corregir</span>
                                </a>
                            </div>

                            <div class="col-4">
                                <a th:href="@{/panel-control/revisionHechos/{idHecho}/rechazoConSugerencias (idHecho=${s.id})}" 
                                   class="btn btn-danger btn-sm w-100 h-100 d-flex flex-column align-items-center justify-content-center py-2"
                                   title="Rechazar Hecho">
                                    <i class="uil uil-times fs-5"></i>
                                    <span style="font-size: 0.65rem;">Rechazar</span>
                                </a>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </div>
</div>
</html>