spring.application.name=ssr
auth.service.url=${AUTH_SERVICE_URL:http://localhost:6020/auth}
agregador.service.url=${AGREGADOR_SERVICE_URL:http://localhost:5010}
estadisticas.service.url=${ESTADISTICAS_SERVICE_URL:http://localhost:4020/api/estadisticas}
fuenteDinamica.service.url=${FUENTE_DINAMICA_SERVICE_URL:http://localhost:4040}
fuenteEstatica.service.url=${FUENTE_ESTATICA_SERVICE_URL:http://localhost:4080}
fuenteProxyApi.service.url=${FUENTE_PROXY_API_URL:http://localhost:7080/api}

modification.allowance-days=7

# Pon un límite grande para videos
spring.servlet.multipart.max-file-size=50MB
spring.servlet.multipart.max-request-size=210MB
spring.security.oauth2.client.registration.google.client-id=${GOOGLE_CLIENT_ID}
spring.security.oauth2.client.registration.google.client-secret=${GOOGLE_CLIENT_SECRET}
spring.security.oauth2.client.registration.google.scope=email,profile
spring.security.oauth2.client.registration.github.client-id=${GITHUB_CLIENT_ID}
spring.security.oauth2.client.registration.github.client-secret=${GITHUB_CLIENT_SECRET}

spring.graphql.client.url=${GRAPHQL_CLIENT_URL:http://localhost:5010/graphql}


# --- 1. Exponer Endpoints de Actuator ---
# Exponemos 'prometheus' para que sea "scrapeado" (leído)
management.endpoints.web.exposure.include=*

# --- 2. Configuración de Tracing (Trazas) ---
management.tracing.enabled=true
management.tracing.sampling.probability=1.0
# Endpoint del colector (Tempo). "localhost:4318" es donde vivirá nuestro Docker
management.zipkin.tracing.endpoint=http://localhost:9411/api/v2/spans
management.endpoint.health.show.details=always
management.metrics.distribution.percentiles-histogram.http.server.requests=true


# --- 3. Configuración de Métricas (Prometheus) ---
# Añadimos el nombre de la app como una etiqueta (tag) a CADA métrica.
# Esto nos permite filtrar en Grafana: "muéstrame métricas de 'mi-modulo-api'"
management.metrics.tags.application=ssr

# --- 4. Correlación de Logs (¡MAGIA!) ---
# Añade [app_name, traceId, spanId] a cada línea de log
logging.pattern.level=%5p [${spring.application.name:},%X{traceId:-},%X{spanId:-}] %m%n

# Config de proms
logging.file.name=./logs/ssr.log

management.tracing.propagation.type=B3
management.tracing.instrumentation.web.exclude=/actuator/**